name: ParamSpider Telegram Workflow

on:
  workflow_dispatch:
    inputs:
      domain:
        description: "Target domain (e.g. example.com)"
        required: true

jobs:
  run-paramspider:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install ParamSpider and dependencies
        run: |
          git clone https://github.com/devanshbatham/ParamSpider.git
          pip install./ParamSpider
          pip install requests urllib3

      - name: Run ParamSpider
        run: |
          paramspider -d "${{ github.event.inputs.domain}}" -o output.txt

      - name: Send results to Telegram
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN}}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID}}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendDocument" \
            -F chat_id=${CHAT_ID} \
            -F document=@"output.txt"        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendDocument" \
            -F chat_id=${CHAT_ID} \
            -F document=@"ParamSpider/output.txt"
